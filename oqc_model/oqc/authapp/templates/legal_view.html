<!DOCTYPE html>
<html>
<head>
    <title>Cooling Test Form</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <style>
        .form-container {
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }
        .custom-btn-small {
            padding: 5px 10px;
            font-size: 12px;
        }
        .action-buttons {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px; /* Adjust the gap between buttons as needed */
            margin-top: 20px; /* Add margin if needed to position the buttons */
        }
        
        .action-buttons .button {
            padding: 10px 20px;
            text-decoration: none;
            color: white;
            background-color: #333; /* Change color as needed */
            border-radius: 5px;
            transition: background-color 0.3s ease;
        }
        
        .action-buttons .button:hover {
            background-color: #0056b3; /* Change hover color as needed */
        }
      
    </style>
    <script>
        function sendReport(reportId) {
            if (confirm('Are you sure you want to send this report to the product owner?')) {
                fetch(`/send_report/${reportId}/`, {
                    method: 'GET',
                    headers: {
                        'X-CSRFToken': getCookie('csrftoken')
                    }
                })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        location.reload();
                    } else {
                        alert('Failed to send report');
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                    alert('An error occurred while sending the report');
                });
            }
        }
    </script>
</head>
<body>

<p style='margin:0cm;font-size:13px;font-family:"Times New Roman",serif;text-align:center;vertical-align:baseline;'><strong><u><span style='font-size:21px;font-family:"Arial",sans-serif;'>{{TestProtocol.TestName}}</span></u></strong></p>
<p style='margin:0cm;font-size:13px;font-family:"Times New Roman",serif;text-align:center;vertical-align:baseline;'><strong><u><span style='font-size:21px;font-family:"Arial",sans-serif;'><span style="text-decoration:none;">&nbsp;</span></span></u></strong></p>

<form class="col-6 mx-auto card p-3 shadow-lg" >
    {% csrf_token %}
    <table>
        <tbody>
            <tr>
                <td style="width:96.4pt;height:5.8pt;">
                    <strong><span class="row_header">Test Objective</span></strong>
                </td>
                <td colspan="4" style="width:410.65pt;height:5.8pt;">
                    <span>{{TestProtocol.Test_Objective}}</span>
                </td>
            </tr>
            <tr>
                <td style="width:96.4pt;">
                    <strong><span class="row_header">Model No.</span></strong>
                </td>
                <td colspan="4" style="width:410.65pt;">
                    <span>{{model.ModelName}}</span>
                </td>
            </tr>
            <tr>
                <td style="width:96.4pt;">
                    <strong><span class="row_header">Sample Quantity</span></strong>
                </td>
                <td colspan="4" style="width:410.65pt;">
                    <span>{{test.sample_quantiy}}</span>
                </td>
            </tr>
            <tr>
                <td style="width:96.4pt;">
                    <strong><span class="row_header">Serial No.</span></strong>
                </td>
                <td colspan="4" style="width:410.65pt;">
                    <span>{{test.SerailNo}}</span>
                   
                </td>
            </tr>
            <tr>
                <td rowspan="10" style="width:96.4pt;">
                    <strong><span class="row_header">Set Details</span></strong>
                </td>
                <td colspan="4" style="width:410.65pt;">
                    <span>Report verification Date: {{test.test_date|date:"d/m/Y"}}</span>
                </td>
                
            </tr>
            <tr>
                <td colspan="2" style="width:207.0pt;">
                    <span>Start Date: {{test.test_start_date|date:"d/m/Y"}}</span>
                </td>
                <td colspan="2" style="width:203.65pt;">
                    <span>End Date: {{test.test_end_date|date:"d/m/Y"}}</span>
                </td>
            </tr>
            <tr>
                <td colspan="2" style="width:207.0pt;">
                    <span>Indoor unit details</span>
                </td>
                <td colspan="2" style="width:203.65pt;">
                    <span>Outdoor unit details</span>
                </td>
            </tr>
            <tr>
                <td style="width:58.9pt; ">
                    <span>Model</span>
                </td>
                <td style="width:148.1pt;">
                    <span>{{model.ModelName}}</span>
                </td>
                <td style="width:75.6pt;">
                    <span>Model</span>
                </td>
                <td style="width:128.05pt;">
                    <span>{{model.ModelName}}</span>
                </td>
            </tr>
            <tr>
                <td style="width:58.9pt; ">
                    <span>S.</span><span>N</span><span>o</span><span>.</span>
                </td>
                <td style="width:148.1pt;">
                    <span>N/A</span>
                </td>
                <td style="width:75.6pt;">
                    <span>S.</span><span>N</span><span>o</span><span>.</span>
                </td>
                <td style="width:128.05pt;">
                    <span>N/A</span>
                </td>
            </tr>
            <tr>
                <td style="width:58.9pt; ">
                    <span>Bl. Motor</span>
                </td>
                <td style="width:148.1pt;">
                    <span>{{model.BImotor}}</span>
                </td>
                <td style="width:75.6pt;">
                    <span>Compressor</span>
                </td>
                <td style="width:128.05pt;">
                    <span>{{model.Compressor}}</span>
                </td>
            </tr>
            <tr>
                <td style="width:58.9pt; ">
                    <span>Blower</span>
                </td>
                <td style="width:148.1pt;">
                    <span>{{model.Blower}}</span>
                </td>
                <td style="width:75.6pt;">
                    <span>Fan motor</span>
                </td>
                <td style="width:128.05pt;">
                    <span>{{model.FanMotor}}</span>
                </td>
            </tr>
            <tr>
                <td style="width:58.9pt; ">
                    <span>Eva. Coil</span>
                </td>
                <td style="width:148.1pt;">
                    <span>{{model.Eva}}</span>
                </td>
                <td style="width:75.6pt;">
                    <span>Fan</span>
                </td>
                <td style="width:128.05pt;">
                    <span>{{model.Fan}}</span>
                </td>
            </tr>
            <tr>
                <td style="width:58.9pt; ">
                    <span>Conn. Pipe</span>
                </td>
                <td style="width:148.1pt;">
                    <span>{{model.ConPipe}}</span>
                </td>
                <td style="width:75.6pt;">
                    <span>Cond. Coil</span>
                </td>
                <td style="width:128.05pt;">
                    <span>{{model.CondCoil}}</span>
                </td>
            </tr>
            <tr>
                <td style="width:58.9pt; ">
                    <span>Ref. Charge</span>
                </td>
                <td style="width:148.1pt;">
                    <span>{{model.RefCharge}}</span>
                </td>
                <td style="width:75.6pt;">
                    <span>Capillary tube</span>
                </td>
                <td style="width:128.05pt;">
                    <span>{{model.Capilary}}</span>
                </td>
            </tr>
            <tr>
                <td style="width:96.4pt;">
                    <strong><span class="row_header">Test Standard</span></strong>
                </td>
                <td colspan="4" style="width:410.65pt;">
                    <span>{{TestProtocol.Test_Standard}}</span>
                </td>
            </tr>
            <tr>
                <td style="width:96.4pt;">
                    <strong><span class="row_header">Test Condition</span></strong>
                </td>
                <td colspan="4" style="width:410.65pt;">
                    <span> {{TestProtocol.Test_Condition|linebreaksbr }}</span>
                </td>
            </tr>
            <tr>
                <td style="width:96.4pt;">
                    <strong><span class="row_header">Test Procedure</span></strong>
                </td>
                <td colspan="4" style="width:410.65pt;">
                    <span> {{TestProtocol.Test_Procedure|linebreaksbr }}</span> 
                </td>
            </tr>
            <tr>
                <td style="width:96.4pt;">
                    <strong><span class="row_header">Judgement Criteria</span></strong>
                </td>
                <td colspan="4" style="width:410.65pt;">
                    <span> {{TestProtocol.Judgement|linebreaksbr }}</span>  
                </td>
            </tr>
            <tr>
                <td style="width:96.4pt;height:14.35pt;">
                    <strong><span class="row_header">Instrument / Equipment used</span></strong>
                </td>
                <td colspan="4" style="width:410.65pt;height:14.35pt;">
                    <span>{{TestProtocol.Instrument}}</span>
                </td>
            </tr>
            <tr>
                <td rowspan="2" style="width:96.4pt;height:12.5pt;">
                    <strong><span class="row_header">Result &amp; Conclusion</span></strong>
                </td>
                <td colspan="4" style="width:410.65pt;height:12.5pt;">
                    <span>{{test.result|safe}}</span>
                </td>
            </tr>
        </tbody>
    </table>

<br><br>

<div class="action-buttons">
    <a class="btn btn-primary" href="{% url 'legal_dashboard' %}">Return</a>
   
    <div class="dropdown">
        <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
        {{test.L_status}}
        </button>
        <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
            <a class="dropdown-item" href="{% url 'change_status_legal' test.id 1 %}">Waiting for Approval</a>
            <a class="dropdown-item" href="{% url 'change_status_legal' test.id 2 %}">Approved</a>
            <a class="dropdown-item" href="{% url 'change_status_legal' test.id 3 %}">Reject</a>
        </div>
    </div>
</div>
</form>
</body>
</html>